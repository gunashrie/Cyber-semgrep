# Code Generated by Sidekick is for learning and experimentation purposes only.
import sqlite3

# Hardcoded secret
api_key = "secret_value"  # This line will be flagged by Semgrep as a warning

def get_user(username):
    conn = sqlite3.connect('example.db')
    cursor = conn.cursor()
    
    # Unsanitized SQL query - this should trigger a blocking issue (ERROR)
    query = "SELECT * FROM users WHERE username = '" + username + "'"  # This line will be flagged by Semgrep as an error
    cursor.execute(query)
    
    result = cursor.fetchall()
    conn.close()
    
    # Missing output encoding - this should trigger a blocking issue (ERROR)
    return result

user = get_user("admin")
print(user)  # This line should be flagged by Semgrep for missing output encoding


